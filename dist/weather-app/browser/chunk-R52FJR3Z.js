import{a as v}from"./chunk-TPGYCWBQ.js";import{a as D,c as k}from"./chunk-EQ36R7UP.js";import{a as q}from"./chunk-AKWFZM2O.js";import"./chunk-5N4XDYED.js";import{a as T,d as V,e as W,g as F,i as N,j as U,m as j,n as K}from"./chunk-3EGIUXTZ.js";import"./chunk-HFZPZ6QE.js";import{Bb as f,Cb as l,Mb as a,Nb as x,Ob as p,Pb as M,Qb as w,Rb as S,Sb as O,Ua as n,Za as C,eb as y,ib as m,pa as g,pb as d,qa as u,rc as P,sc as I,ub as i,uc as E,vb as r,zb as b}from"./chunk-QAW2EEKY.js";function H(t,o){if(t&1){let e=b();i(0,"li",11),f("click",function(){let c=g(e).$implicit,h=l(2);return u(h.selectSuggestion(c))}),a(1),r()}if(t&2){let e=o.$implicit;n(),M(" ",e.name,", ",e.country," ")}}function $(t,o){if(t&1&&(i(0,"ul",9),m(1,H,2,2,"li",10),r()),t&2){let e=l();n(),d("ngForOf",e.suggestions)}}function A(t,o){t&1&&(i(0,"div"),a(1,"Loading..."),r())}function B(t,o){if(t&1&&(i(0,"div",12),a(1),r()),t&2){let e=l();n(),x(e.error)}}function G(t,o){if(t&1&&(i(0,"span"),a(1),r()),t&2){let e=l(2);n(),p("",e.weather.current.temp_c,"\xB0C")}}function L(t,o){if(t&1&&(i(0,"span"),a(1),r()),t&2){let e=l(2);n(),p("",e.weather.current.temp_f,"\xB0F")}}function R(t,o){if(t&1&&(i(0,"span"),a(1),r()),t&2){let e=l(2);n(),p("",e.weather.current.wind_kph," km/h")}}function J(t,o){if(t&1&&(i(0,"span"),a(1),r()),t&2){let e=l(2);n(),p("",e.weather.current.wind_mph," mph")}}function Q(t,o){if(t&1&&(i(0,"div")(1,"h2"),a(2),i(3,"span"),a(4),r()(),i(5,"p"),a(6," Temperature: "),m(7,G,2,1,"span",7)(8,L,2,1,"span",7),r(),i(9,"p"),a(10),r(),i(11,"p"),a(12),r(),i(13,"p"),a(14," Wind Speed: "),m(15,R,2,1,"span",7)(16,J,2,1,"span",7),r()()),t&2){let e=l();n(2),p(" Weather in ",e.weather.location.name," "),n(2),x(e.getWeatherEmoji(e.weather.current.condition.text)),n(3),d("ngIf",e.units==="metric"),n(),d("ngIf",e.units==="imperial"),n(2),p("Condition: ",e.weather.current.condition.text,""),n(2),p("Humidity: ",e.weather.current.humidity,"%"),n(3),d("ngIf",e.units==="metric"),n(),d("ngIf",e.units==="imperial")}}var z=class t{constructor(o,e){this.http=o;this.userService=e;this.userService.getUserSettings().subscribe(s=>{let c=s?.data();c&&(c.units==="metric"||c.units==="imperial")&&(this.units=c.units)})}city="";weather=null;loading=!1;error="";suggestions=[];units="metric";getWeather(){this.loading=!0,this.error="",this.weather=null,this.suggestions=[];let e=`https://api.weatherapi.com/v1/current.json?key=${v.weatherApiKey}&q=${this.city}&aqi=no`;this.http.get(e).subscribe({next:s=>{this.weather=s,this.loading=!1},error:()=>{this.error="City not found",this.loading=!1}})}fetchSuggestions(){if(this.city.length<2){this.suggestions=[];return}let e=`https://api.weatherapi.com/v1/search.json?key=${v.weatherApiKey}&q=${this.city}`;this.http.get(e).subscribe({next:s=>{this.suggestions=s},error:()=>{this.suggestions=[]}})}selectSuggestion(o){this.city=o.name,this.suggestions=[],this.getWeather()}getWeatherEmoji(o){let e=o.toLowerCase();return e.includes("sunny")?"\u2600\uFE0F":e.includes("cloud")?"\u2601\uFE0F":e.includes("rain")?"\u{1F327}\uFE0F":e.includes("snow")?"\u2744\uFE0F":e.includes("storm")?"\u26C8\uFE0F":e.includes("fog")||e.includes("mist")?"\u{1F32B}\uFE0F":"\u{1F308}"}static \u0275fac=function(e){return new(e||t)(C(D),C(q))};static \u0275cmp=y({type:t,selectors:[["app-dashboard"]],decls:15,vars:5,consts:[["weatherForm","ngForm"],[1,"dashboard-container"],[3,"ngSubmit"],[1,"search-container"],["type","text","name","city","placeholder","Enter city name","required","",3,"ngModelChange","input","ngModel"],["class","suggestions-list",4,"ngIf"],["type","submit"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"suggestions-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"error"]],template:function(e,s){if(e&1){let c=b();i(0,"div",1)(1,"h1"),a(2,"Weather Dashboard"),r(),i(3,"p"),a(4,"Enter a city to see the current weather"),r(),i(5,"form",2,0),f("ngSubmit",function(){return g(c),u(s.getWeather())}),i(7,"div",3)(8,"input",4),O("ngModelChange",function(_){return g(c),S(s.city,_)||(s.city=_),u(_)}),f("input",function(){return g(c),u(s.fetchSuggestions())}),r(),m(9,$,2,1,"ul",5),r(),i(10,"button",6),a(11,"Get Weather"),r()(),m(12,A,2,0,"div",7)(13,B,2,1,"div",8)(14,Q,17,8,"div",7),r()}e&2&&(n(8),w("ngModel",s.city),n(),d("ngIf",s.suggestions.length),n(3),d("ngIf",s.loading),n(),d("ngIf",s.error),n(),d("ngIf",s.weather))},dependencies:[E,P,I,k,K,U,T,V,W,j,N,F],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:linear-gradient(to bottom,#87cefa,#f0f8ff);text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;position:relative}.dashboard-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.dashboard-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;margin:1rem 0 0;width:250px;border:1px solid #ccc;border-radius:8px;font-size:1rem}.dashboard-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .suggestions-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;position:absolute;top:100%;left:0;width:100%;max-height:200px;overflow-y:auto;border:1px solid #ccc;background:#fff;border-radius:0 0 8px 8px;z-index:1000;text-align:left}.dashboard-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .suggestions-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer;transition:background .2s ease}.dashboard-container[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .suggestions-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#eee}.dashboard-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#fc0;color:#036;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background .3s ease}.dashboard-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffdb4d}.dashboard-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#ff4d4d;margin-top:1rem;font-weight:700}.dashboard-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1rem;color:#036;font-size:2.5rem}.dashboard-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:2rem;color:#036}.dashboard-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.2rem}.dashboard-container[_ngcontent-%COMP%]   div[ngIf=weather][_ngcontent-%COMP%]{margin-top:2rem;background:#ffffffb3;padding:1.5rem;border-radius:12px;display:inline-block}"]})};export{z as DashboardComponent};
